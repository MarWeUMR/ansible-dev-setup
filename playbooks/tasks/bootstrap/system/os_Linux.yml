---

- name: Set hostname
  ansible.builtin.hostname:
    name: "{{ hostname }}"
  become: true
  tags: hostname

# - name: Set user shell to zsh and add to group 'cdrom'
#   ansible.builtin.user:
#     name: "{{ ansible_user_id }}"
#     shell: /usr/bin/zsh
#     groups: cdrom
#     append: true
#   become: true
#   tags: user

- name: Generate host keys
  ansible.builtin.command:
    cmd: ssh-keygen -A
    creates: /etc/ssh/ssh_host_*_key
  become: true
  tags: ssh

# - name: Secure SSH settings
#   ansible.builtin.import_role:
#     name: devsec.hardening.ssh_hardening
#   become: true
#   tags: [ ssh, security ]
